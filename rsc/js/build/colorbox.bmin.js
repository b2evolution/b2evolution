/* This includes 4 files: jquery.colorbox.js, voting.js, jquery.touchswipe.js, colorbox.init.js */

function init_voting_bar(l,s,e,t){function c(){if("cboxVoting"==l.attr("id")){var e=jQuery("#colorbox").width(),t=l.width();e<t&&jQuery("#colorbox").css({left:jQuery("#colorbox").position().left-Math.round(t-e)/2,width:t})}}if(t&&(l.html('<div class="loading">&nbsp;</div>'),jQuery.ajax({type:"POST",url:s+"&vote_ID="+e,success:function(e){l.html(ajax_debug_clear(e)),c(),votingAdjust()}})),void 0===l.is_inited){function o(t,e,o,n){var i=l.find("#voting_action"),r=i.length?i.val():s;0<l.find("#votingID").length&&(r+="&vote_ID="+l.find("#votingID").val()),0<l.find("#widgetID").length&&(r+="&widget_ID="+l.find("#widgetID").val()),0<l.find("#skinID").length&&(r+="&skin_ID="+l.find("#skinID").val());var a=l.css("backgroundColor");jQuery(t).is(":checkbox")?jQuery(t).is(":checked")?(r+="&checked=1",votingFadeIn(l,o)):(r+="&checked=0",votingFadeIn(l,n)):(jQuery(t).removeAttr("id"),votingFadeIn(l,o)),jQuery.ajax({type:"POST",url:r+"&vote_action="+e,success:function(e){jQuery(t).is(":checkbox")||(l.html(ajax_debug_clear(e)),c()),votingFadeIn(l,a),votingAdjust()}})}l.on("click","a.action_icon",function(){return!1}),l.on("click","#votingLike",function(){o(this,"like","#bcffb5")}),l.on("click","#votingNoopinion",function(){o(this,"noopinion","#bbb")}),l.on("click","#votingDontlike",function(){o(this,"dontlike","#ffc9c9")}),l.on("click","#votingInappropriate",function(){o(this,"inappropriate","#dcc","#bbb")}),l.on("click","#votingSpam",function(){o(this,"spam","#dcc","#bbb")}),l.is_inited=!0}}function votingFadeIn(e,t){var o="transparent"==t||"rgba(0, 0, 0, 0)"==t;if(o){for(var n=e.parent(),i=t;n&&("transparent"==i||"rgba(0, 0, 0, 0)"==i);)i=n.css("backgroundColor"),n=n.parent();"HTML"!=n[0].tagName&&(t=i)}e.animate({backgroundColor:t},200,function(){o&&e.css("background-color","transparent")})}function votingAdjust(){$prev=jQuery("#cboxPrevious"),$wrap=jQuery("#cboxWrapper"),$voting=jQuery("#cboxVoting");$prev.width();var e=$("#colorbox .voting_wrapper"),t=($("#colorbox .voting_wrapper > .btn-group"),$("#colorbox .vote_title_panel"),$("#colorbox .vote_others"),$("#colorbox .separator"),$wrap.parent().width());e.removeClass("compact"),t<=700&&e.addClass("compact")}!function(h,s,e){var a,c,u,d,p,f,g,i,w,v,m,b,x,y,l,_,T,j,k,Q,C,S,I,E,H,O,D,L,M,W,t,$,P,n={transition:"elastic",speed:300,width:!1,initialWidth:"600",innerWidth:!1,minWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,minHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,inline:!1,html:!1,iframe:!1,fastIframe:!0,photo:!1,href:!1,title:!1,rel:!1,preloading:!0,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",openNewWindowText:"open in new window",open:!1,returnFocus:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:!1,displayVoting:!1,votingUrl:""},z="colorbox",N="cbox",A=N+"Element",R=N+"_open",r=N+"_load",F=N+"_complete",o=N+"_cleanup",U=N+"_closed",V=N+"_purge",K=!h.support.opacity;function X(e,t,o){return o=s.createElement("div"),e&&(o.id=N+e),o.style.cssText=t||"",h(o)}function Y(e,t){return Math.round((/%/.test(e)?("x"===t?f.width():f.height())/100:1)*parseInt(e,10))}function B(e){return T.photo||/\.(gif|png|jpg|jpeg|bmp)(?:\?([^#]*))?(?:#(\.*))?$/i.test(e)}function q(e){for(e in T=h.extend({},h.data(H,z)))h.isFunction(T[e])&&"on"!==e.substring(0,2)&&(T[e]=T[e].call(H));T.rel=T.rel||H.rel||"nofollow",T.href=T.href||h(H).attr("href"),T.title=T.title||H.title,"string"==typeof T.href&&(T.href=h.trim(T.href))}function G(e,t){t&&t.call(H),h.event.trigger(e)}function Z(e){if(!W){if(H=e,j={},q(),p=h(H),O=0,"nofollow"!==T.rel&&(p=h("."+A).filter(function(){return(h.data(this,z).rel||this.rel)===T.rel}),-1===(O=p.index(H))&&(p=p.add(H),O=p.length-1)),!L){if(L=M=!0,c.show(),T.returnFocus)try{H.blur(),h(H).one(U,function(){try{this.focus()}catch(e){}})}catch(e){}a.css({cursor:T.overlayClose?"pointer":"auto"}).show(),T.w=Y(T.initialWidth,"x"),T.h=Y(T.initialHeight,"y"),P.position(),G(R,T.onOpen),_.add(v).hide(),l.html(T.close).show(),i=N+"Slideshow_",r="click."+N,T.slideshow&&p[1]?(o=function(){b.text(T.slideshowStop).one(r,n),c.removeClass(i+"off").addClass(i+"on"),t=setInterval(function(){L&&(T.loop||O!=p.length-1)||n(),P.next()},T.slideshowSpeed)},n=function(){clearInterval(t),b.text(T.slideshowStart).one(r,o),c.removeClass(i+"on").addClass(i+"off")},(T.slideshowAuto?o:n)()):c.removeClass(i+"off "+i+"on")}P.load(!0)}var t,o,n,i,r}(P=h.fn[z]=h[z]=function(e,t){var o=this;if(e=e||{},!o[0]){if(o.selector)return o;o=h("<a/>"),e.open=!0}return t&&(e.onComplete=t),o.each(function(){h.data(this,z,h.extend({},h.data(this,z)||n,e)),h(this).addClass(A)}),(h.isFunction(e.open)&&e.open.call(o)||e.open)&&Z(o[0]),o}).init=function(){f=h(e),c=X().attr({id:z,class:K?N+"IE":""}),a=X("Overlay").hide(),u=X("Wrapper"),d=X("Content").append(g=X("LoadedContent","width:0; height:0; overflow:hidden"),w=X("LoadingOverlay").add(X("LoadingGraphic")),v=X("Title"),$infoBar=X("InfoBar").append($nav=X("Navigation").append(y=X("Previous"),m=X("Current"),x=X("Next")),$voting=X("Voting"),b=X("Slideshow"),l=X("Close"),$open=X("Open"))),u.append(d),i=X(!1,"position:absolute; width:9999px; visibility:hidden; display:none"),h("body").prepend(a,c.append(u,i)),$voting.data("voting_positions_done",0),previous_title="",d.children().on("mouseenter",function(){h(this).addClass("hover")}).on("mouseleave",function(){h(this).removeClass("hover")}).addClass("hover"),k=d.outerHeight(!0)-d.height(),Q=d.outerWidth(!0)-d.width(),S=g.outerHeight(!0),I=g.outerWidth(!0),C=S,E=l.height()+4,c.css({"padding-bottom":k,"padding-right":Q}).hide(),x.on("click",function(){P.next()}),y.on("click",function(){P.prev()}),l.on("click",function(){P.close()}),$open.on("click",function(){P.close()}),_=x.add(y).add(m).add(b),d.children().removeClass("hover"),a.on("click",function(){T.overlayClose&&P.close()}),h(s).bind("keydown."+N,function(e){var t=e.keyCode;L&&T.escKey&&27===t&&(e.preventDefault(),P.close()),L&&T.arrowKey&&p[1]&&(37===t?(e.preventDefault(),y.trigger("click")):39===t&&(e.preventDefault(),x.trigger("click")))})},P.remove=function(){c.add(a).remove(),h("."+A).removeData(z).removeClass(A)},P.position=function(e,t){var o=null==j.pw||T.w>j.pw?T.w:j.pw,n=null==j.ph||T.h>j.ph?T.h:j.ph,i=h("#colorbox .voting_wrapper");parseInt(d.css("border-bottom"));$infoBar.css({minHeight:E+"px"}),S=o<=700&&$voting.is(":visible")?(i.addClass("compact"),2*C-3):(i.removeClass("compact"),C);var r=0,a=0;function l(e){d[0].style.width=e.style.width,w[0].style.height=w[1].style.height=d[0].style.height=e.style.height}f.unbind("resize."+N),c.hide(),T.fixed?c.css({position:"fixed"}):(r=f.scrollTop(),a=f.scrollLeft(),c.css({position:"absolute"})),!1!==T.right?a+=Math.max(f.width()-o-I-Q-Y(T.right,"x"),0):!1!==T.left?a+=Y(T.left,"x"):a+=Math.round(Math.max(f.width()-o-I-Q,0)/2),!1!==T.bottom?r+=Math.max(s.documentElement.clientHeight-n-S-k-Y(T.bottom,"y"),0):!1!==T.top?r+=Y(T.top,"y"):r+=Math.round(Math.max(s.documentElement.clientHeight-n-S-k,0)/2),c.show(),e=c.width()===o+I&&c.height()===n+S?0:e||0,u[0].style.width=u[0].style.height="9999px",c.dequeue().animate({width:o+I,height:n+S,top:r,left:a},{duration:e,complete:function(){l(this),M=!1,u[0].style.width=o+I+Q+"px",u[0].style.height=n+S+k+"px",t&&t(),setTimeout(function(){f.bind("resize."+N,P.position)},1),P.resizeVoting(),u.parent().width()<380?b.hide():b.show()},step:function(){l(this)}})},P.resize=function(e){if(L){if((e=e||{}).width&&(T.w=Y(e.width,"x")-I-Q),e.innerWidth&&(T.w=Y(e.innerWidth,"x")),g.css({width:T.w}),e.height&&(T.h=Y(e.height,"y")-S-k),e.innerHeight&&(T.h=Y(e.innerHeight,"y")),!e.innerHeight&&!e.height){var t=g.wrapInner("<div style='overflow:auto'></div>").children();T.h=t.outerHeight(),t.replaceWith(t.children())}g.css({height:T.h}),j.pw=T.w,j.ph=T.h,P.position("none"===T.transition?0:T.speed)}},P.prep=function(e){if(L){var t,s="none"===T.transition?0:T.speed;g.remove(),(g=X("LoadedContent").append(e)).hide().appendTo(i.show()).css({width:(T.w=T.w||g.width(),T.w=T.mw&&T.mw<T.w?T.mw:T.w,T.w=T.minWidth&&T.minWidth>T.w?T.minWidth:T.w,j.pw=null==j.pw||T.w>j.pw?T.w:j.pw,j.pw),overflow:T.scrolling?"auto":"hidden"}).css({height:(T.h=T.h||g.height(),T.h=T.mh&&T.mh<T.h?T.mh:T.h,T.h=T.minHeight&&T.minHeight>T.h?T.minHeight:T.h,j.ph=null==j.ph||T.h>j.ph?T.h:j.ph,j.ph)}).prependTo(d),i.hide(),h(D).css({float:"none"}),t=function(){var e,t,o,n,i,r,a=p.length;function l(){K&&c[0].style.removeProperty("filter")}L&&(r=function(){clearTimeout($),w.hide(),G(F,T.onComplete)},K&&D&&g.fadeIn(100),v.add(g).show(),1<a?("string"==typeof T.current&&380<g.width()&&m.html(T.current.replace("{current}",O+1).replace("{total}",a)).show(),x[T.loop||O<a-1?"show":"hide"]().html(T.next),y[T.loop||O?"show":"hide"]().html(T.previous),e=O?p[O-1]:p[a-1],o=O<a-1?p[O+1]:p[0],T.slideshow&&380<g.width()&&b.show(),T.preloading&&(n=h.data(o,z).href||o.href,t=h.data(e,z).href||e.href,n=h.isFunction(n)?n.call(o):n,t=h.isFunction(t)?t.call(e):t,B(n)&&(h("<img/>")[0].src=n),B(t)&&(h("<img/>")[0].src=t))):_.hide(),T.iframe?(i=h("<iframe/>").addClass(N+"Iframe")[0],T.fastIframe?r():h(i).one("load",r),i.name=N+ +new Date,i.src=T.href,T.scrolling||(i.scrolling="no"),K&&(i.frameBorder=0,i.allowTransparency="true"),h(i).appendTo(g).one(V,function(){i.src="//about:blank"})):r(),"fade"===T.transition?c.fadeTo(s,1,l):l())},"fade"===T.transition?c.fadeTo(s,0,function(){P.position(0,t)}):P.position(s,t)}},P.load=function(e){var t,o,n=P.prep;D=!(M=!0),H=p[O],e||q(),G(V),G(r,T.onLoad),previous_title=T.title,T.displayVoting&&""!=T.votingUrl&&""!=H.id?(0==$voting.data("voting_positions_done")&&(0==S&&(S=g.outerHeight(!0)),$voting.data("voting_positions_done",1)),$voting.show(),init_voting_bar($voting,T.votingUrl,H.id,!0)):""!=$voting.html()&&($voting.html("").hide(),$voting.data("voting_positions_done",0)),T.h=T.height?Y(T.height,"y")-S-k:T.innerHeight&&Y(T.innerHeight,"y"),T.w=T.width?Y(T.width,"x")-I-Q:T.innerWidth&&Y(T.innerWidth,"x"),T.mw=T.w,T.mh=T.h,T.maxWidth&&(T.mw=Y(T.maxWidth,"x")-I-Q,T.mw=T.w&&T.w<T.mw?T.w:T.mw),T.maxHeight&&(T.mh=Y(T.maxHeight,"y")-S-k,T.mh=T.h&&T.h<T.mh?T.h:T.mh),t=T.href,$=setTimeout(function(){w.show()},100),T.inline?(X().hide().insertBefore(h(t)[0]).one(V,function(){h(this).replaceWith(g.children())}),n(h(t))):T.iframe?n(" "):T.html?n(T.html):B(t)?(h(D=new Image).addClass(N+"Photo").on("error",function(){T.title=!1,n(X("Error").text("This image could not be loaded"))}).on("load",function(){var e;D.onload=null,T.scalePhotos&&(o=function(){D.height-=D.height*e,D.width-=D.width*e},T.mw&&D.width>T.mw&&(e=(D.width-T.mw)/D.width,o()),T.mh&&D.height>T.mh&&(e=(D.height-T.mh)/D.height,o())),T.h&&(D.style.marginTop=Math.max(T.h-D.height,0)/2+"px"),jQuery(D).removeClass("zoomin zoomout"),colorbox_is_zoomed=!1;var s=0,c=0,t=D.naturalWidth>1.1*D.width||D.naturalHeight>1.1*D.height;t&&(D.className=D.className+" zoomin"),!t&&p[1]&&(O<p.length-1||T.loop)&&(D.onclick=function(e){P.next()}),t&&jQuery(D).bind("click dblclick",function(e,t){if(colorbox_is_zoomed)D.className=D.className.replace(/zoomout/,""),D.width=s,D.height=c,jQuery(this).parent().scrollLeft(0).scrollTop(0),jQuery(this).css({position:"relative",top:"0",left:"0"});else{P.resize({width:T.mw,height:T.mh+parseInt(g.css("margin-bottom"))});var o=jQuery(this).offset(),n=void 0!==e.pageX?e.pageX:t.originalEvent.touches[0].pageX,i=void 0!==e.pageY?e.pageY:t.originalEvent.touches[0].pageY,r=(n-o.left)/jQuery(this).width(),a=(i-o.top)/jQuery(this).height();D.className=D.className+" zoomout",h(D).css({position:"static",top:0,left:0,transform:"none"}),s=D.width,c=D.height,D.removeAttribute("width"),D.removeAttribute("height");var l=jQuery(this).parent()[0];jQuery(this).parent().scrollLeft(r*(l.scrollWidth-l.clientWidth)).scrollTop(a*(l.scrollHeight-l.clientHeight))}colorbox_is_zoomed=!colorbox_is_zoomed}),K&&(D.style.msInterpolationMode="bicubic"),setTimeout(function(){n(D)},1)}),setTimeout(function(){D.src=t},1)):t&&i.load(t,T.data,function(e,t,o){n("error"===t?X("Error").text("Request unsuccessful: "+o.statusText):h(this).contents())})},P.next=function(){!M&&p[1]&&(O<p.length-1||T.loop)&&(O=O<p.length-1?O+1:0,P.load())},P.prev=function(){!M&&p[1]&&(O||T.loop)&&(O=O?O-1:p.length-1,P.load())},P.close=function(){L&&!W&&(L=!(W=!0),G(o,T.onCleanup),f.unbind("."+N),a.fadeTo(200,0),c.stop().fadeTo(300,0,function(){c.add(a).css({opacity:1,cursor:"auto"}).hide(),G(V),g.remove(),setTimeout(function(){W=!1,G(U,T.onClosed)},1)}))},P.resizeVoting=function(){var e=h("#colorbox .voting_wrapper"),t=u.parent().width();t<=480?m.hide():m.show(),$infoBar.css({minHeight:E+"px"}),S=t<=700&&$voting.is(":visible")?(e.addClass("compact"),2*C-3):(e.removeClass("compact"),C)},P.element=function(){return h(H)},P.settings=n,t=function(e){0!==e.button&&void 0!==e.button||e.ctrlKey||e.shiftKey||e.altKey||(e.preventDefault(),Z(this))},h(s).on("click","."+A,t),h(P.init)}(jQuery,document,this),jQuery.event.special.dblclick={setup:function(e,t){jQuery(this).bind("touchstart.dblclick",jQuery.event.special.dblclick.handler)},teardown:function(e){jQuery(this).unbind("touchstart.dblclick")},handler:function(e){var t=e.target,o=jQuery(t),n=o.data("lastTouch")||0,i=(new Date).getTime(),r=i-n;20<r&&r<500?(o.data("lastTouch",0),o.trigger("dblclick",e)):o.data("lastTouch",i)}},function(e){"function"==typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],e):e(jQuery)}(function(ie){"use strict";var re="left",ae="right",le="up",se="down",ce="in",he="out",ue="none",de="auto",pe="swipe",fe="pinch",ge="tap",we="doubletap",ve="longtap",me="horizontal",be="vertical",xe="all",ye=10,_e="start",Te="move",je="end",ke="cancel",Qe="ontouchstart"in window,Ce="TouchSwipe";function n(e,v){var t=Qe||!v.fallbackToMouseEvents,o=t?"touchstart":"mousedown",n=t?"touchmove":"mousemove",i=t?"touchend":"mouseup",r=t?null:"mouseleave",a="touchcancel",m=0,b=null,x=0,y=0,_=0,T=1,j=0,k=0,Q=null,l=ie(e),C="start",S=0,I=null,s=0,E=0,c=0,h=0,u=0,d=null;try{l.bind(o,p),l.bind(a,w)}catch(e){ie.error("events not supported "+o+","+a+" on jQuery.swipe")}function p(e){if(!0!==l.data(Ce+"_intouch")&&!(0<ie(e.target).closest(v.excludedElements,l).length)){var t,o,n=e.originalEvent?e.originalEvent:e,i=Qe?n.touches[0]:n;return C=_e,Qe?S=n.touches.length:e.preventDefault(),k=b=null,T=1,j=_=y=x=m=0,I=function(){for(var e=[],t=0;t<=5;t++)e.push({start:{x:0,y:0},end:{x:0,y:0},identifier:0});return e}(),(o={})[re]=ee(re),o[ae]=ee(ae),o[le]=ee(le),o[se]=ee(se),Q=o,Y(),!Qe||S===v.fingers||v.fingers===xe||N()?(G(0,i),s=ne(),2==S&&(G(1,n.touches[1]),y=_=oe(I[0].start,I[1].start)),(v.swipeStatus||v.pinchStatus)&&(t=L(n,C))):t=!1,!1===t?(L(n,C=ke),t):(q(!0),null)}}function f(e){var t=e.originalEvent?e.originalEvent:e;if(C!==je&&C!==ke&&!B()){var o,n,i,r,a,l,s,c,h,u,d,p,f=Z(Qe?t.touches[0]:t);if(E=ne(),Qe&&(S=t.touches.length),C=Te,2==S&&(0==y?(G(1,t.touches[1]),y=_=oe(I[0].start,I[1].start)):(Z(t.touches[1]),_=oe(I[0].end,I[1].end),I[0].end,I[1].end,k=T<1?he:ce),T=(_/y*1).toFixed(2),j=Math.abs(y-_)),S===v.fingers||v.fingers===xe||!Qe||N()){if(u=f.start,d=f.end,p=function(e,t){var o=e.x-t.x,n=t.y-e.y,i=Math.atan2(n,o),r=Math.round(180*i/Math.PI);r<0&&(r=360-Math.abs(r));return r}(u,d),function(e,t){if(v.allowPageScroll===ue||N())e.preventDefault();else{var o=v.allowPageScroll===de;switch(t){case re:(v.swipeLeft&&o||!o&&v.allowPageScroll!=me)&&e.preventDefault();break;case ae:(v.swipeRight&&o||!o&&v.allowPageScroll!=me)&&e.preventDefault();break;case le:(v.swipeUp&&o||!o&&v.allowPageScroll!=be)&&e.preventDefault();break;case se:(v.swipeDown&&o||!o&&v.allowPageScroll!=be)&&e.preventDefault()}}}(e,b=p<=45&&0<=p||p<=360&&315<=p?re:135<=p&&p<=225?ae:45<p&&p<135?se:le),c=f.start,h=f.end,m=Math.round(Math.sqrt(Math.pow(h.x-c.x,2)+Math.pow(h.y-c.y,2))),x=te(),l=b,s=m,s=Math.max(s,J(l)),Q[l].distance=s,(v.swipeStatus||v.pinchStatus)&&(o=L(t,C)),!v.triggerOnTouchEnd||v.triggerOnTouchLeave){var g=!0;if(v.triggerOnTouchLeave){var w={left:(a=(r=ie(r=this)).offset()).left,right:a.left+r.outerWidth(),top:a.top,bottom:a.top+r.outerHeight()};n=f.end,i=w,g=n.x>i.left&&n.x<i.right&&n.y>i.top&&n.y<i.bottom}!v.triggerOnTouchEnd&&g?C=D(Te):v.triggerOnTouchLeave&&!g&&(C=D(je)),C!=ke&&C!=je||L(t,C)}}else L(t,C=ke);!1===o&&L(t,C=ke)}}function g(e){var t=e.originalEvent;return Qe&&0<t.touches.length?(c=ne(),h=event.touches.length+1,!0):(B()&&(S=h),e.preventDefault(),E=ne(),x=te(),$()?L(t,C=ke):v.triggerOnTouchEnd||0==v.triggerOnTouchEnd&&C===Te?L(t,C=je):!v.triggerOnTouchEnd&&V()?M(t,C=je,ge):C===Te&&L(t,C=ke),q(!1),null)}function w(){_=y=s=E=S=0,T=1,Y(),q(!1)}function H(e){var t=e.originalEvent;v.triggerOnTouchLeave&&L(t,C=D(je))}function O(){l.unbind(o,p),l.unbind(a,w),l.unbind(n,f),l.unbind(i,g),r&&l.unbind(r,H),q(!1)}function D(e){var t=e,o=P(),n=W(),i=$();return!o||i?t=ke:!n||e!=Te||v.triggerOnTouchEnd&&!v.triggerOnTouchLeave?!n&&e==je&&v.triggerOnTouchLeave&&(t=ke):t=je,t}function L(e,t){var o=void 0;return A()&&R()||R()?o=M(e,t,pe):(z()&&N()||N())&&!1!==o&&(o=M(e,t,fe)),X()&&K()&&!1!==o?o=M(e,t,we):x>v.longTapThreshold&&m<ye&&v.longTap&&!1!==o?o=M(e,t,ve):1!==S&&Qe||!isNaN(m)&&0!==m||!V()||!1===o||(o=M(e,t,ge)),t===ke&&w(),t===je&&(Qe?0==e.touches.length&&w():w()),o}function M(e,t,o){var n=void 0;if(o==pe){if(l.trigger("swipeStatus",[t,b||null,m||0,x||0,S]),v.swipeStatus&&!1===(n=v.swipeStatus.call(l,e,t,b||null,m||0,x||0,S)))return!1;if(t==je&&A()){if(l.trigger("swipe",[b,m,x,S]),v.swipe&&!1===(n=v.swipe.call(l,e,b,m,x,S)))return!1;switch(b){case re:l.trigger("swipeLeft",[b,m,x,S]),v.swipeLeft&&(n=v.swipeLeft.call(l,e,b,m,x,S));break;case ae:l.trigger("swipeRight",[b,m,x,S]),v.swipeRight&&(n=v.swipeRight.call(l,e,b,m,x,S));break;case le:l.trigger("swipeUp",[b,m,x,S]),v.swipeUp&&(n=v.swipeUp.call(l,e,b,m,x,S));break;case se:l.trigger("swipeDown",[b,m,x,S]),v.swipeDown&&(n=v.swipeDown.call(l,e,b,m,x,S))}}}if(o==fe){if(l.trigger("pinchStatus",[t,k||null,j||0,x||0,S,T]),v.pinchStatus&&!1===(n=v.pinchStatus.call(l,e,t,k||null,j||0,x||0,S,T)))return!1;if(t==je&&z())switch(k){case ce:l.trigger("pinchIn",[k||null,j||0,x||0,S,T]),v.pinchIn&&(n=v.pinchIn.call(l,e,k||null,j||0,x||0,S,T));break;case he:l.trigger("pinchOut",[k||null,j||0,x||0,S,T]),v.pinchOut&&(n=v.pinchOut.call(l,e,k||null,j||0,x||0,S,T))}}return o==ge?t!==ke&&t!==je||(clearTimeout(d),K()&&!X()?(u=ne(),d=setTimeout(ie.proxy(function(){u=null,l.trigger("tap",[e.target]),v.tap&&(n=v.tap.call(l,e,e.target))},this),v.doubleTapThreshold)):(u=null,l.trigger("tap",[e.target]),v.tap&&(n=v.tap.call(l,e,e.target)))):o==we?t!==ke&&t!==je||(clearTimeout(d),u=null,l.trigger("doubletap",[e.target]),v.doubleTap&&(n=v.doubleTap.call(l,e,e.target))):o==ve&&(t!==ke&&t!==je||(clearTimeout(d),u=null,l.trigger("longtap",[e.target]),v.longTap&&(n=v.longTap.call(l,e,e.target)))),n}function W(){var e=!0;return null!==v.threshold&&(e=m>=v.threshold),e}function $(){var e=!1;return null!==v.cancelThreshold&&null!==b&&(e=J(b)-m>=v.cancelThreshold),e}function P(){return!v.maxTimeThreshold||!(x>=v.maxTimeThreshold)}function z(){var e=F(),t=U(),o=null===v.pinchThreshold||j>=v.pinchThreshold;return e&&t&&o}function N(){return!!(v.pinchStatus||v.pinchIn||v.pinchOut)}function A(){var e=P(),t=W(),o=F(),n=U();return!$()&&n&&o&&t&&e}function R(){return!!(v.swipe||v.swipeStatus||v.swipeLeft||v.swipeRight||v.swipeUp||v.swipeDown)}function F(){return S===v.fingers||v.fingers===xe||!Qe}function U(){return 0!==I[0].end.x}function V(){return!!v.tap}function K(){return!!v.doubleTap}function X(){if(null==u)return!1;var e=ne();return K()&&e-u<=v.doubleTapThreshold}function Y(){h=c=0}function B(){var e=!1;c&&ne()-c<=v.fingerReleaseThreshold&&(e=!0);return e}function q(e){!0===e?(l.bind(n,f),l.bind(i,g),r&&l.bind(r,H)):(l.unbind(n,f,!1),l.unbind(i,g,!1),r&&l.unbind(r,H,!1)),l.data(Ce+"_intouch",!0===e)}function G(e,t){var o=void 0!==t.identifier?t.identifier:0;return I[e].identifier=o,I[e].start.x=I[e].end.x=t.pageX||t.clientX,I[e].start.y=I[e].end.y=t.pageY||t.clientY,I[e]}function Z(e){var t=function(e){for(var t=0;t<I.length;t++)if(I[t].identifier==e)return I[t]}(void 0!==e.identifier?e.identifier:0);return t.end.x=e.pageX||e.clientX,t.end.y=e.pageY||e.clientY,t}function J(e){if(Q[e])return Q[e].distance}function ee(e){return{direction:e,distance:0}}function te(){return E-s}function oe(e,t){var o=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);return Math.round(Math.sqrt(o*o+n*n))}function ne(){return(new Date).getTime()}this.enable=function(){return l.bind(o,p),l.bind(a,w),l},this.disable=function(){return O(),l},this.destroy=function(){return O(),l.data(Ce,null),l},this.option=function(e,t){if(void 0!==v[e]){if(void 0===t)return v[e];v[e]=t}else ie.error("Option "+e+" does not exist on jQuery.swipe.options");return null}}ie.fn.swipe=function(e){var t=ie(this),o=t.data(Ce);if(o&&"string"==typeof e){if(o[e])return o[e].apply(this,Array.prototype.slice.call(arguments,1));ie.error("Method "+e+" does not exist on jQuery.swipe")}else if(!(o||"object"!=typeof e&&e))return function(o){!o||void 0!==o.allowPageScroll||void 0===o.swipe&&void 0===o.swipeStatus||(o.allowPageScroll=ue);void 0!==o.click&&void 0===o.tap&&(o.tap=o.click);o=o||{};return o=ie.extend({},ie.fn.swipe.defaults,o),this.each(function(){var e=ie(this),t=e.data(Ce);t||(t=new n(this,o),e.data(Ce,t))})}.apply(this,arguments);return t},ie.fn.swipe.defaults={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:"label, button, input, select, textarea, a, .noSwipe"},ie.fn.swipe.phases={PHASE_START:_e,PHASE_MOVE:Te,PHASE_END:je,PHASE_CANCEL:ke},ie.fn.swipe.directions={LEFT:re,RIGHT:ae,UP:le,DOWN:se,IN:ce,OUT:he},ie.fn.swipe.pageScroll={NONE:ue,HORIZONTAL:me,VERTICAL:be,AUTO:de},ie.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,ALL:xe}});var b2evo_colorbox_params={maxWidth:480<jQuery(window).width()?"95%":"100%",maxHeight:480<jQuery(window).height()?"90%":"100%",slideshow:!0,slideshowAuto:!1};function init_colorbox(e){if("object"==typeof e&&0!=e.length){var t=e.attr("rel").match(/lightbox\[([a-z]+)/i);switch(t=t?t[1]:""){case"p":e.colorbox(b2evo_colorbox_params_post);break;case"c":e.colorbox(b2evo_colorbox_params_cmnt);break;case"user":e.colorbox(b2evo_colorbox_params_user);break;default:e.colorbox(b2evo_colorbox_params)}}}b2evo_colorbox_params_post=jQuery.extend({},b2evo_colorbox_params,b2evo_colorbox_params_post),b2evo_colorbox_params_cmnt=jQuery.extend({},b2evo_colorbox_params,b2evo_colorbox_params_cmnt),b2evo_colorbox_params_user=jQuery.extend({},b2evo_colorbox_params,b2evo_colorbox_params_user),b2evo_colorbox_params=jQuery.extend({},b2evo_colorbox_params,b2evo_colorbox_params_other),jQuery(document).ready(function(){jQuery('a[rel^="lightbox"]').each(function(){init_colorbox(jQuery(this))}),jQuery("#colorbox").swipe({swipeLeft:function(e,t,o,n,i){"undefined"!=typeof colorbox_is_zoomed&&colorbox_is_zoomed||jQuery.colorbox.next()},swipeRight:function(e,t,o,n,i){"undefined"!=typeof colorbox_is_zoomed&&colorbox_is_zoomed||jQuery.colorbox.prev()}}),jQuery(document).on("click","#colorbox img.cboxPhoto",function(){jQuery(this).hasClass("zoomout")?jQuery("#colorbox").swipe("disable"):jQuery("#colorbox").swipe("enable")})});